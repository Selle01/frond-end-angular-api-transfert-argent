<section class="section">
  <div class="container mt-5">
    <div class="row">
      <div
        class="col-12 col-sm-8 offset-sm-2 col-md-6 offset-md-3 col-lg-6 offset-lg-3 col-xl-4 offset-xl-4"
      >
        <div class="card card-primary">
          <div class="card-header">
            <h4 class="text-center">CONNEXION</h4>
          </div>
          <div class="card-body">
            <form [formGroup]="loginForm" (ngSubmit)="login()">
              <div class="form-group">
                <label for="username">Login</label>
                <input
                  matInput
                  [ngClass]="{ 'is-invalid': submitted && formControls.username.errors }"
                  type="text"
                  id="username"
                  class="form-control"
                  placeholder="Username"
                  autocomplete="username"
                  formControlName="username"
                  tabindex="1"
                  required
                  autofocus
                />
                <div
                  *ngIf="submitted && formControls.username.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="formControls.username.errors.required">
                    Username is required
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="d-block">
                  <label for="password" class="control-label">Password</label>
                  <div class="float-right">
                    <a href="auth-forgot-password.html" class="text-small">
                      Forgot Password?
                    </a>
                  </div>
                </div>
                <input
                  matInput
                  [ngClass]="{ 'is-invalid': submitted && formControls.password.errors }"
                  type="password"
                  id="password"
                  class="form-control"
                  placeholder="Password"
                  formControlName="password"
                  autocomplete="password"
                  tabindex="2"
                  required
                />
                <div
                  *ngIf="submitted && formControls.password.errors"
                  class="invalid-feedback"
                >
                  <div *ngIf="formControls.password.errors.required">
                    Password is required
                  </div>
                </div>
              </div>
              <div class="form-group">
                <button
                  mat-raised-button
                  [disabled]="loading"
                  color="primary"
                  class="btn btn-primary btn-lg btn-block"
                  type="submit"
                  tabindex="4"
                >
                <!-- [disabled]="!loginForm.valid"  : ajouter sur le botton pour le desactiver tant qu'il n'a pas saisie-->
                <!-- <span  *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>LOGIN -->
                  <i *ngIf="loading" class="fas fa-circle-notch fa-spin"></i>LOGIN
                </button>

                <div *ngIf="errorMessage" class="alert alert-danger mt-3 mb-0">
                  {{ errorMessage }}
                </div>
                <div *ngIf="expiredToken" class="alert alert-danger mt-3 mb-0">
                  SESSION EXPIRED
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
